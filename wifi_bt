1.非power save模式与BT/WIFI共存之间关系处理
在WiFi使用过程中或者WiFi处于非power save模式，BT请求使用，则PTA进行仲裁，如果仲裁给WiFi使用，则拒绝BT请求，如果仲裁给BT使用，则拉高wl_tx_abort信号，触发WiFi preemt过程、硬件发送null(ps=1)帧；在BT使用完毕时，拉低wl_tx_abort信号，触发WiFi post preemt过程、硬件发送null(ps=0)帧。\\非power save模式包括：WiFi有发送/接收业务，WiFi虽然没有发送/接收业务、但是没有进入power save模式。
在BT使用过程中，如果有WiFi使用请求，则PTA进行仲裁，如果仲裁WiFi使用，则中断BT业务，如果仲裁给BT使用，则BT继续使用，此时WiFi侧不需要任何动作？。


2.power save与BT/WIFI共存之间关系处理
进入power save模式成功(null(ps=1)帧发送成功)之后，拉低wl_tx_preemt_en=0；退出power save模式成功(null(ps=0)帧发送成功)之后，才拉高wl_tx_preemt_en=1。

“WiFi进入低功耗模式先到/后到、BT/WIFI共存-仲裁给BT使用先到/后到，WiFi退出低功耗模式先到/后到、BT/WIFI共存-BT使用完毕先到/后到。”的多种情况分析。

①WiFi进入低功耗模式先到、BT/WIFI共存-仲裁给BT使用后到，
WiFi进入低功耗模式成功(软件发送null(ps=1)帧成功、对端回复ack成功)，则拉低wl_tx_preemt_en=0。在WiFi低功耗期间，WiFi处于idle状态，BT随时可以使用、随时可以切走天线，不需要PTA仲裁，不需要硬件发送null(ps=1)帧。

②WiFi进入低功耗模式后到、BT/WIFI共存-仲裁给BT使用先到，
在BT使用期间，WiFi想要进入低功耗模式。在BT使用期间，WiFi一段时间没有发送/接收业务请求，尝试进入低功耗模式、需要软件发送null(ps=1)帧，则拉高wlan_tx_active/wlan_rx_active，然后PTA进行仲裁。如果PTA仲裁给BT使用，则BT继续使用，null(ps=1)帧发送不出去，无法进入WiFi低功耗模式；如果仲裁给WiFi使用，则拉低wl_tx_abort信号，WiFi硬件发送null(ps=0)帧，然后WiFi软件发送null(ps=1)帧、对端回复ack成功，则进入WiFi低功耗模式，拉低wl_tx_preemt_en=0。

③WiFi退出低功耗模式先到、BT/WIFI共存-BT使用完毕后到，
在BT使用期间，WiFi想要退出低功耗模式，和②一样。在BT使用期间，WiFi有发送/接收业务请求，尝试退出低功耗模式、需要软件发送null(ps=0)帧，则拉高wlan_tx_active/wlan_rx_active，然后PTA进行仲裁。如果PTA仲裁给BT使用，则BT继续使用，null(ps=0)帧发送不出去，无法退出WiFi低功耗模式；如果仲裁给WiFi使用，则拉低wl_tx_abort信号，WiFi硬件发送null(ps=0)帧，然后WiFi软件发送null(ps=0)帧、对端回复ack成功，则退出WiFi低功耗模式，拉高wl_tx_preemt_en=1。

④WiFi退出低功耗模式后到、BT/WIFI共存-BT使用完毕先到，
BT使用完毕，拉低wl_tx_abort信号，硬件发送null(ps=0)帧，此后WiFi可以正常使用。如果WiFi想要退出低功耗模式，则直接发送null(ps=0)帧、对端回复ack成功，则退出WiFi低功耗模式，拉高wl_tx_preemt_en=1。

存在的问题，如果WiFi想要进入或者退出低功耗模式，而PTA仲裁给BT使用，可能会造成WiFi长时间无法进入低功耗模式或者长时间无法退出低功耗模式。

WiFi进入低功耗模式、BT/WIFI共存-仲裁给BT使用 同时到，
WiFi退出低功耗模式、BT/WIFI共存-BT使用完毕 同时到，
由处理器工作频率决定，频率大于1M时在1us的时间里同时到的可能性很小，可以忽略。
